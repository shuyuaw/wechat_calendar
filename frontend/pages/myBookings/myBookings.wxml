<view class="container page-container-safe-mybookings">
  <view class="page-title">我的预约</view>

  <view wx:if="{{isLoading}}" class="loading-message">
    <text>正在加载我的预约...</text>
  </view>

  <view wx:if="{{!isLoading && error}}" class="error-message">
    <text>加载失败: {{error}}</text>
    <button size="mini" bindtap="fetchMyBookings">重试</button>
  </view>

  <view wx:if="{{!isLoading && !error && myBookings.length === 0}}" class="no-bookings-message">
    <text>您当前没有待进行的预约。</text>
  </view>

  <block wx:if="{{!isLoading && !error && myBookings.length > 0}}">
    <view class="booking-list">
      <view wx:for="{{myBookings}}" wx:key="bookingId" class="booking-item">
        <view class="booking-details">
          <text class="booking-time">时间: {{item.displayStart}} - {{item.displayEnd}}</text>
          </view>
        <button
          class="cancel-button"
          size="mini"
          type="warn"
          bindtap="handleCancelBooking"
          data-bookingid="{{item.bookingId}}"
        >
          取消预约
        </button>
      </view>
    </view>
  </block>

</view>